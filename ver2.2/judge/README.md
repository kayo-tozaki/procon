#judge
judgeディレクトリでは、

 - 提出されたプログラムの受け取り
 - 提出されたプログラムの実行
 - 実行結果の比較
 - 結果ページの生成

を行っている。

##`create_result`
結果ページの生成を主に行っている。  
詳細は、`create_result/README.md`を参照のこと。

## `1~8`
各設問の設定ファイル。内容は1行ずつ次の通り。

 - 実行時間
 - メモリーリミット（未実装)
 - サンプルケース数
 - 誤差 [^1]

[^1 ]: 0は誤差なし。数字あり(=nとする)の場合は、その小数n位までの判断のみ行う。

##`inotify.sh`
別途インストールソフト **inotify-tools** を使用して、  
`STOCK`が書き換えられた時に、  
`judge.rb`を実行するシェルスクリプト。  
また、キューを用いたシステムで、同時提出対策を行っている。  

`inotify.sh`は同時実行されないように、シェルスクリプト内部で処理が行われている。

##`judge_test.rb`
ジャッジプログラム。主な実行動作は

 - データの取得
 - 提出プログラムのコンパイル & TLE 判断
 - 提出プログラムの実行 & TLE 判断
 - 実行結果の正誤判断
 - 結果の書き出し

である。詳細な動きは、プログラム内のコメントを参照のこと。

##`killer.rb`
ジャッジプログラム`judge_test.rb`から呼び出されるRubyファイル。
残留 Ruby プロセスのkillを行う。

##`main.*`
提出されたプログラム。各言語ごとに拡張子が異なる。

同一言語があとから提出された場合は、上書きされる。

##`Result`
結果ページに追加するデータの提出時間が記述される。  
記述内容は上書きされるの注意

##`result_notify.sh`
`inotify.sh`とほぼ同じ動きをするスクリプト。  
`Result`が書き換えられた時に、`create_result/create_result_test.rb`  
を実行するプログラム。

##`run.sh`
`judge.rb`を実行するスクリプト。PHPのシェルが`sh`のみのため、それの対策。

##`STOCK`
`inotify.sh`を実行する回数が記述されている。

##`Time`
プログラムの提出時刻が書かれている

##`upload.php`
提出されたプログラムを保存し、DBにデータを追加するPHPファイル。

 - チーム名のエラー表示
 - 提出ソースの保存
 - DBの上書き
 - 各種ファイルの書き出し

を行っている。
